.detail-header {
  @apply flex items-center gap-4 mb-5 pb-5;
  border-bottom: 1px solid var(--border);
}

.detail-header h2 {
  @apply flex-1 m-0 text-2xl;
}

.back-btn {
  @apply w-10 h-10 rounded-lg flex items-center justify-center cursor-pointer;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  color: var(--text);
}

.btn-secondary {
  @apply px-4 py-2.5 rounded-lg cursor-pointer flex items-center gap-2;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  color: var(--text);
}

.btn.danger { background: var(--danger); }
.btn.success { background: var(--success); }
.btn.active { background: var(--danger); }

.tabs {
  @apply flex gap-1.5 mb-5 pb-4;
  border-bottom: 1px solid var(--border);
}

.tabs button {
  @apply px-5 py-3 bg-transparent border-none cursor-pointer rounded-lg flex items-center gap-2 text-sm transition-all duration-200;
  color: var(--text-muted);
}

.tabs button:hover {
  background: var(--bg-tertiary);
}

.tabs button.active {
  background: var(--accent);
  @apply text-white;
}

.info-grid {
  @apply grid gap-5 mb-5;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

.card h3 {
  @apply m-0 mb-4 flex items-center gap-2.5 text-base;
}

.meta-row {
  @apply flex items-center gap-3 mb-3;
}

.meta-row label {
  @apply min-w-[120px] text-[13px] flex items-center gap-2;
  color: var(--text-muted);
}

.meta-row select,
.meta-row input {
  @apply flex-1 px-3.5 py-2.5 rounded-lg;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  color: var(--text);
}

.input-suffix {
  @apply flex items-center gap-2 flex-1 min-w-0;
}

.input-suffix input {
  @apply w-[70px] min-w-[70px] flex-none;
}

.input-suffix span {
  @apply text-[13px] whitespace-nowrap;
  color: var(--text-muted);
}

.pin-btn {
  @apply px-4 py-2 rounded-lg cursor-pointer flex items-center gap-2;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  color: var(--text-muted);
}

.pin-btn:hover {
  background: var(--border);
}

.pin-btn.pinned {
  background: rgba(253, 203, 110, 0.2);
  color: var(--warning);
  border-color: var(--warning);
}

/* Dependencies */
.dep-section {
  @apply mb-3;
}

.dep-label {
  @apply block text-xs mb-1.5;
  color: var(--text-muted);
}

.dep-item {
  @apply flex items-center gap-2.5 px-3 py-2.5 rounded-md mb-1 cursor-pointer;
  background: var(--bg-tertiary);
}

.dep-item:hover {
  background: var(--border);
}

.dep-status {
  @apply w-2.5 h-2.5 rounded-full;
}

.dep-status.todo { background: var(--warning); }
.dep-status.in_progress { background: var(--plan); }
.dep-status.done { background: var(--success); }

.remove-dep {
  @apply ml-auto bg-transparent border-none cursor-pointer;
  color: var(--text-muted);
}

.remove-dep:hover {
  color: var(--danger);
}

.add-dep-form {
  @apply flex gap-2;
}

.add-dep-form select {
  @apply flex-1 px-3.5 py-2.5 rounded-lg;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  color: var(--text);
}

.btn-add-dep {
  @apply px-4 py-2.5 border-none rounded-lg text-white cursor-pointer;
  background: var(--accent);
}

.btn-add-dep:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.labels-container {
  @apply flex gap-2 flex-wrap;
}

.label-tag {
  @apply flex items-center gap-1.5 px-3 py-1.5 rounded-2xl text-[13px] text-white;
}

.label-tag button {
  @apply bg-transparent border-none cursor-pointer p-0;
  color: rgba(255, 255, 255, 0.7);
}

.add-label {
  @apply px-3 py-1.5 rounded-2xl text-[13px];
  background: var(--bg-tertiary);
  border: 1px dashed var(--border);
  color: var(--text-muted);
}

.new-label-form {
  @apply flex gap-2 mt-3;
}

.new-label-input {
  @apply flex-1 px-3 py-2 rounded-lg text-[13px];
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  color: var(--text);
}

.new-label-input:focus {
  @apply outline-none;
  border-color: var(--accent);
}

textarea {
  @apply w-full min-h-[120px] p-3.5 rounded-lg resize-y text-sm;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  color: var(--text);
  font-family: inherit;
}

/* Comment Input */
.comment-input-wrapper {
  @apply rounded-lg overflow-hidden mb-4;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
}

.comment-input {
  @apply w-full min-h-[60px] p-3 bg-transparent border-none text-sm resize-y;
  color: var(--text);
  font-family: inherit;
}

.comment-input:focus {
  @apply outline-none;
}

.comment-input-footer {
  @apply flex justify-between items-center px-3 py-2;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border);
}

.markdown-hint {
  @apply text-xs;
  color: var(--text-muted);
}

.comments-list {
  @apply flex flex-col gap-2.5;
}

.comment {
  @apply rounded-lg p-3.5;
  background: var(--bg-tertiary);
}

.comment-header {
  @apply flex justify-between mb-2;
}

.comment-date {
  @apply text-xs;
  color: var(--text-muted);
}

/* Markdown Rendered Text */
.comment-text {
  @apply m-0 leading-relaxed;
}

.comment-text :global(strong) {
  @apply font-semibold;
  color: var(--text);
}

.comment-text :global(em) {
  @apply italic;
}

.comment-text :global(code) {
  @apply px-1.5 py-0.5 rounded font-mono text-[13px];
  background: var(--bg-secondary);
  color: var(--accent);
}

.comment-text :global(del) {
  @apply line-through;
  color: var(--text-muted);
}

.comment-text :global(.mention) {
  @apply px-1 py-0.5 rounded font-medium;
  background: rgba(99, 102, 241, 0.15);
  color: var(--accent);
}

.comment-text :global(ul) {
  @apply my-2 pl-5;
}

.comment-text :global(li) {
  @apply my-1;
}

/* Reactions */
.comment-reactions {
  @apply flex items-center gap-1.5 mt-2.5 flex-wrap;
}

.reaction-btn {
  @apply flex items-center gap-1 px-2.5 py-1 rounded-2xl text-[13px] cursor-pointer transition-all duration-150;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
}

.reaction-btn:hover {
  border-color: var(--accent);
  background: var(--bg-hover);
}

.reaction-btn.active {
  background: rgba(99, 102, 241, 0.15);
  border-color: var(--accent);
}

.emoji-picker-wrapper {
  @apply relative;
}

.add-reaction-btn {
  @apply w-[30px] h-[30px] rounded-full bg-transparent flex items-center justify-center cursor-pointer transition-all duration-150;
  border: 1px dashed var(--border);
  color: var(--text-muted);
}

.add-reaction-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: rgba(99, 102, 241, 0.1);
}

.emoji-picker {
  @apply absolute bottom-full left-0 mb-1.5 p-2 flex gap-1 rounded-lg z-[100];
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.emoji-btn {
  @apply w-8 h-8 border-none bg-transparent rounded-md text-lg cursor-pointer transition-all duration-150;
}

.emoji-btn:hover {
  @apply scale-110;
  background: var(--bg-hover);
}

.emoji-btn.selected {
  background: rgba(99, 102, 241, 0.2);
}

/* TASKS */
.task-list {
  @apply flex flex-col gap-2.5 my-4;
}

.task-item {
  @apply rounded-lg overflow-hidden;
  background: var(--bg-tertiary);
}

.task-main {
  @apply flex items-center gap-3 p-3.5;
}

.task-item.done .task-main {
  @apply opacity-50;
}

.task-item.done span {
  @apply line-through;
}

.task-item.dragging {
  @apply opacity-50;
  background: var(--bg-secondary);
}

.task-item.drag-over {
  border-top: 2px solid var(--accent);
}

.drag-handle {
  @apply cursor-grab p-1;
  color: var(--text-muted);
}

.drag-handle:hover {
  color: var(--accent);
}

.task-item.dragging .drag-handle {
  @apply cursor-grabbing;
}

.task-main input[type="checkbox"] {
  @apply w-[18px] h-[18px];
  accent-color: var(--accent);
}

.task-main span {
  @apply flex-1;
}

.icon-btn {
  @apply bg-transparent border-none cursor-pointer p-1.5;
  color: var(--text-muted);
}

.icon-btn:hover {
  color: var(--accent);
}

/* Dropdown */
.dropdown {
  @apply relative inline-block;
}

.dropdown-menu {
  @apply hidden absolute top-full right-0 rounded-lg min-w-[160px] z-[100];
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.dropdown:hover .dropdown-menu {
  @apply block;
}

.dropdown-menu button {
  @apply flex items-center gap-2.5 w-full px-3.5 py-2.5 bg-transparent border-none cursor-pointer text-[13px];
  color: var(--text);
}

.dropdown-menu button:hover {
  background: var(--bg-tertiary);
}

.dropdown-menu button:first-child {
  @apply rounded-t-lg;
}

.dropdown-menu button:last-child {
  @apply rounded-b-lg;
}

/* Modal */
.modal-backdrop {
  @apply fixed inset-0 flex items-center justify-center z-[1000];
  background: rgba(0, 0, 0, 0.6);
}

.modal {
  @apply p-6 w-[90%] max-w-[400px] rounded-xl;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
}

.modal h3 {
  @apply m-0 mb-4 flex items-center gap-2.5;
}

.modal p {
  @apply mb-4 text-sm;
  color: var(--text-muted);
}

.modal .form-select {
  @apply w-full p-3 rounded-lg text-sm;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  color: var(--text);
}

.modal-actions {
  @apply flex gap-3 justify-end mt-5;
}

.btn-primary {
  @apply px-5 py-2.5 border-none rounded-lg text-white cursor-pointer;
  background: var(--accent);
}

.btn-primary:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.subtasks {
  @apply p-3.5 pt-0 ml-10;
  border-left: 2px solid var(--border);
}

.subtask {
  @apply flex items-center gap-2.5 p-2.5 rounded-md mt-2;
  background: var(--bg-secondary);
}

.subtask.done {
  @apply opacity-50;
}

.subtask.done span {
  @apply line-through;
}

.subtask span {
  @apply flex-1 text-[13px];
}

.progress-section {
  @apply flex items-center gap-4 mt-4;
}

.progress-container.large {
  @apply flex-1 h-2.5;
}

.progress-bar.over {
  background: var(--danger);
}

/* TIME */
.time-display {
  @apply flex justify-around my-5;
}

.time-box {
  @apply text-center;
}

.time-label {
  @apply block text-[13px] mb-2;
  color: var(--text-muted);
}

.time-value {
  @apply text-[28px] font-bold;
}

.time-value.accent {
  color: var(--accent);
}

.time-value.danger {
  color: var(--danger);
}

.timer-display {
  @apply text-center my-5;
}

.timer-value {
  @apply text-6xl font-bold font-mono;
  color: var(--accent);
}

.timer-controls {
  @apply flex justify-center gap-4;
}

/* FILES */
.upload-area {
  @apply p-12 text-center cursor-pointer transition-all duration-200 mb-5 rounded-xl;
  border: 2px dashed var(--border);
}

.upload-area:hover {
  border-color: var(--accent);
  background: rgba(108, 92, 231, 0.1);
}

.upload-area i {
  @apply text-4xl mb-4;
  color: var(--text-muted);
}

.upload-area p {
  @apply m-0;
  color: var(--text-muted);
}

.attachments-list {
  @apply flex flex-col gap-2.5;
}

.attachment-item {
  @apply flex items-center gap-4 p-4 rounded-lg;
  background: var(--bg-tertiary);
}

.attachment-item > i {
  @apply text-[28px];
  color: var(--accent);
}

.attachment-info {
  @apply flex-1;
}

.attachment-info a {
  @apply font-medium no-underline;
  color: var(--text);
}

.attachment-info a:hover {
  color: var(--accent);
}

.attachment-meta {
  @apply block text-xs mt-1;
  color: var(--text-muted);
}

/* ACTIVITY */
.activity-timeline {
  @apply flex flex-col gap-4;
}

.activity-item {
  @apply flex gap-4;
}

.activity-icon {
  @apply w-10 h-10 rounded-full flex items-center justify-center;
  background: var(--bg-tertiary);
  color: var(--accent);
}

.activity-content {
  @apply flex-1;
}

.activity-text {
  @apply block;
}

.activity-date {
  @apply text-xs;
  color: var(--text-muted);
}

.loading {
  @apply flex flex-col items-center justify-center h-[50vh];
  color: var(--text-muted);
}

.loading i {
  @apply text-5xl mb-5;
}

.form-row.small {
  @apply mb-2.5;
}

.form-row.small input {
  @apply px-3 py-2;
}

.form-row.small button {
  @apply px-3 py-2;
}

/* Delete button */
.delete-btn {
  @apply bg-transparent border-none cursor-pointer p-1.5 rounded transition-all duration-200;
  color: var(--text-muted);
}

.delete-btn:hover {
  color: var(--danger);
  background: rgba(255, 107, 107, 0.1);
}

.delete-btn i {
  @apply text-sm;
}

/* Title editing */
.title-edit-input {
  @apply flex-1 px-3.5 py-2 rounded-lg text-2xl font-semibold;
  background: var(--bg-tertiary);
  border: 2px solid var(--accent);
  color: var(--text);
  font-family: inherit;
}

.title-edit-input:focus {
  @apply outline-none;
}

.edit-title-btn {
  @apply w-9 h-9 rounded-lg flex items-center justify-center cursor-pointer transition-all duration-200;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  color: var(--text-muted);
}

.edit-title-btn:hover {
  background: var(--accent);
  border-color: var(--accent);
  @apply text-white;
}

/* Delete confirmation modal */
.confirm-overlay {
  @apply fixed inset-0 flex items-center justify-center z-[1000] backdrop-blur-sm;
  background: rgba(0, 0, 0, 0.7);
}

.confirm-modal {
  @apply p-8 text-center max-w-[400px] w-[90%] rounded-2xl;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
}

.confirm-icon {
  @apply w-[60px] h-[60px] rounded-full flex items-center justify-center mx-auto mb-5;
  background: rgba(255, 107, 107, 0.15);
}

.confirm-icon i {
  @apply text-[28px];
  color: var(--danger);
}

.confirm-modal h3 {
  @apply m-0 mb-4 text-xl justify-center;
}

.confirm-modal p {
  @apply m-0 mb-2.5;
  color: var(--text);
}

.confirm-warning {
  @apply text-[13px] #{!important};
  color: var(--text-muted) !important;
}

.confirm-actions {
  @apply flex gap-3 justify-center mt-6;
}

.btn-cancel {
  @apply px-6 py-3 rounded-lg cursor-pointer font-medium transition-all duration-200;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  color: var(--text);
}

.btn-cancel:hover {
  background: var(--border);
}

.btn-danger {
  @apply px-6 py-3 border-none rounded-lg text-white cursor-pointer font-medium flex items-center gap-2 transition-all duration-200;
  background: var(--danger);
}

.btn-danger:hover {
  @apply brightness-110;
}
